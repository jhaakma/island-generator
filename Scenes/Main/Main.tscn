[gd_scene load_steps=21 format=3 uid="uid://csjlsvgm6cf7k"]

[ext_resource type="Script" uid="uid://bcx870gbsxl8e" path="res://Components/Background/background.gd" id="1_hkvnm"]
[ext_resource type="Script" uid="uid://cunwi2033q3mc" path="res://Scenes/Main/main.gd" id="1_qtv3y"]
[ext_resource type="Shader" uid="uid://b477g63iggl6p" path="res://IslandGeneration/Render/Shaders/pixelate.gdshader" id="1_wgovn"]
[ext_resource type="PackedScene" uid="uid://ohoiqeiuqx0l" path="res://IslandGeneration/Render/PixelIslandRenderer.tscn" id="2_cmk6n"]
[ext_resource type="Resource" uid="uid://nku6nbo0ciyq" path="res://IslandGeneration/Biomes/DeepOcean.tres" id="2_hkvnm"]
[ext_resource type="Resource" uid="uid://dtgx0rqlgp2iu" path="res://IslandGeneration/Generators/SimpleIsland.tres" id="2_o8wgc"]
[ext_resource type="Script" uid="uid://cw7q27li57ob2" path="res://IslandGeneration/Collision/collision_generator.gd" id="3_4vhfm"]
[ext_resource type="PackedScene" uid="uid://b0d506g17u768" path="res://IslandGeneration/Render/GPUIslandRenderer.tscn" id="4_5s61s"]
[ext_resource type="Script" uid="uid://bwe5m5syebgmk" path="res://Scenes/Main/map_node.gd" id="4_dvlhv"]
[ext_resource type="Shader" uid="uid://cwf3ab7e6ijmx" path="res://IslandGeneration/Render/Shaders/gpu_island.gdshader" id="5_7npjy"]
[ext_resource type="TileSet" uid="uid://c6viwathcphwh" path="res://TileMap/OutlineTiles.tres" id="6_aw1lf"]
[ext_resource type="PackedScene" uid="uid://627jml6ruhca" path="res://Player/Player.tscn" id="6_w20t6"]
[ext_resource type="PackedScene" uid="uid://br0bdiafokh6e" path="res://Components/Wind/Wind.tscn" id="15_5ci8a"]
[ext_resource type="PackedScene" uid="uid://cmb20sttpyjm1" path="res://IslandGeneration/Render/TileMapIslandRenderer.tscn" id="19_qdkat"]
[ext_resource type="TileSet" uid="uid://by06tpvcswh3g" path="res://TileMap/TileSet01.tres" id="20_udh0u"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_cv8e0"]
shader = ExtResource("1_wgovn")
shader_parameter/pixel_size = 0.0

[sub_resource type="ViewportTexture" id="ViewportTexture_dvlhv"]
viewport_path = NodePath("Main/SubViewport")

[sub_resource type="Resource" id="Resource_4vhfm"]
script = ExtResource("3_4vhfm")
accuracy = 7.615
metadata/_custom_type_script = "uid://cw7q27li57ob2"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4vhfm"]
shader = ExtResource("5_7npjy")
shader_parameter/outline_color_multi = -0.525
shader_parameter/outline_thickness = 0.085
shader_parameter/biome_count = 0
shader_parameter/pixel_size = 0.3

[sub_resource type="Curve" id="Curve_5ci8a"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.0531178, 0.50724), 2.32141, 2.32141, 0, 0, Vector2(0.251732, 0.942882), 0.916, 0.916, 0, 0, Vector2(0.512702, 1), 0.0, 0.0, 0, 0, Vector2(0.745958, 0.920035), -0.989278, -0.989278, 0, 0, Vector2(0.889145, 0.514499), -1.8549, -1.8549, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 7

[node name="Node2D" type="Node2D"]

[node name="Background" type="ColorRect" parent="."]
custom_minimum_size = Vector2(1920, 1080)
offset_right = 1920.0
offset_bottom = 1080.0
script = ExtResource("1_hkvnm")
biome = ExtResource("2_hkvnm")

[node name="WorldRender" type="TextureRect" parent="."]
material = SubResource("ShaderMaterial_cv8e0")
offset_right = 1920.0
offset_bottom = 1080.0
rotation = -0.0036586
texture = SubResource("ViewportTexture_dvlhv")

[node name="CanvasLayer2" type="CanvasLayer" parent="."]
visible = false

[node name="Main" type="Node2D" parent="." node_paths=PackedStringArray("island_renderer", "map_node", "player")]
script = ExtResource("1_qtv3y")
island_renderer = NodePath("SubViewport/Island 1/GpuIslandRenderer")
island_generator = ExtResource("2_o8wgc")
map_node = NodePath("SubViewport/Island 1/Map")
collision_generator = SubResource("Resource_4vhfm")
player = NodePath("SubViewport/Player")

[node name="SubViewport" type="SubViewport" parent="Main"]
transparent_bg = true
handle_input_locally = false
canvas_item_default_texture_filter = 0
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="Island 1" type="Node2D" parent="Main/SubViewport"]

[node name="Map" type="Node2D" parent="Main/SubViewport/Island 1"]
scale = Vector2(4, 4)
script = ExtResource("4_dvlhv")

[node name="MapSprite" type="Sprite2D" parent="Main/SubViewport/Island 1/Map"]
material = SubResource("ShaderMaterial_4vhfm")
centered = false

[node name="Collision" type="StaticBody2D" parent="Main/SubViewport/Island 1/Map"]
visible = false

[node name="PixelIslandRenderer" parent="Main/SubViewport/Island 1" node_paths=PackedStringArray("sprite") instance=ExtResource("2_cmk6n")]
sprite = NodePath("../Map/MapSprite")

[node name="GpuIslandRenderer" parent="Main/SubViewport/Island 1" node_paths=PackedStringArray("island_sprite") instance=ExtResource("4_5s61s")]
position = Vector2(-1, -4)
island_sprite = NodePath("../Map/MapSprite")
map_scale = 1.0

[node name="TileMapIslandRenderer" parent="Main/SubViewport/Island 1" node_paths=PackedStringArray("ocean_layer", "land_layer") instance=ExtResource("19_qdkat")]
position = Vector2(0, -5)
ocean_layer = NodePath("OceanLayer")
land_layer = NodePath("LandLayer")

[node name="OceanLayer" type="TileMapLayer" parent="Main/SubViewport/Island 1/TileMapIslandRenderer"]
position = Vector2(-4.76837e-07, -4.76837e-07)
tile_set = ExtResource("20_udh0u")

[node name="LandLayer" type="TileMapLayer" parent="Main/SubViewport/Island 1/TileMapIslandRenderer"]
position = Vector2(-9.09495e-13, 9.09495e-13)
tile_set = ExtResource("6_aw1lf")

[node name="Wind" parent="Main/SubViewport" node_paths=PackedStringArray("player") instance=ExtResource("15_5ci8a")]
player = NodePath("../Player")
min_wind_speed = 70.0
min_rotation_degrees_per_second = 1.0
max_rotation_degrees_per_second = 2.0

[node name="Player" parent="Main/SubViewport" node_paths=PackedStringArray("wind") instance=ExtResource("6_w20t6")]
thrust_force = 150.0
reverse_force = 30.0
wind = NodePath("../Wind")
efficiency_curve = SubResource("Curve_5ci8a")

[node name="Camera2D" type="Camera2D" parent="Main/SubViewport/Player"]
zoom = Vector2(10, 10)

[node name="CanvasLayer" type="CanvasLayer" parent="."]
visible = false

[node name="DebugSprite" type="Sprite2D" parent="CanvasLayer" groups=["debug_sprite"]]
visible = false
centered = false
